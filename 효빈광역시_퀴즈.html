<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>íš¨ë¹ˆê´‘ì—­ì‹œ ì‹œë¯¼ ëŠ¥ë ¥ê³ ì‚¬ - ë§ˆìŠ¤í„° ì—ë””ì…˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- ë°ì´í„° íŒŒì¼ ë¡œë“œ (ì „ì—­ quizDB ê°ì²´ì— ë°ì´í„° ì¶”ê°€ë¨) -->
    <script src="quiz_data_1.js"></script>
    <script src="quiz_data_2.js"></script>
    <script src="quiz_data_3.js"></script>
    <script src="quiz_data_4.js"></script>

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f3f4f6; -webkit-font-smoothing: antialiased; user-select: none; }
        .app-container { max-width: 480px; margin: 0 auto; background-color: white; min-height: 100vh; position: relative; box-shadow: 0 0 20px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        .option-btn { background-color: #f9fafb; border: 2px solid #e5e7eb; border-radius: 12px; padding: 14px; text-align: left; transition: all 0.2s; font-weight: 500; color: #374151; width: 100%; margin-bottom: 8px; font-size: 0.95rem; cursor: pointer; }
        .option-btn:active { transform: scale(0.98); background-color: #f3f4f6; }
        .option-btn.correct { border-color: #22c55e; background-color: #f0fdf4; color: #15803d; }
        .option-btn.wrong { border-color: #ef4444; background-color: #fef2f2; color: #b91c1c; }
        .progress-bar { transition: width 0.3s ease; }
        .pop-anim { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

<div class="app-container">
    
    <!-- [í™”ë©´ 1] ë¶„ì•¼ ì„ íƒ -->
    <div id="selection-screen" class="p-6">
        <header class="mb-6">
            <div class="flex items-center gap-2 mb-2">
                <a href="íš¨ë¹ˆí€´ì¦ˆ.html" class="text-gray-400 p-1"><i class="fa-solid fa-arrow-left"></i></a>
                <span class="text-indigo-600 font-bold text-sm uppercase tracking-tighter">Hyobin Expert Mode</span>
            </div>
            <h1 class="text-2xl font-black text-gray-900">íš¨ë¹ˆê´‘ì—­ì‹œ ëŠ¥ë ¥ê³ ì‚¬</h1>
            <p class="text-gray-500 text-sm mt-1">ê° ë¶„ì•¼ë³„ 40ë¬¸ì œ í’€ì—ì„œ 10ë¬¸ì œê°€ ëœë¤ ì¶œì œë©ë‹ˆë‹¤.</p>
        </header>

        <div class="grid gap-3">
            <div onclick="initQuiz('history')" class="bg-amber-50 p-4 rounded-xl border border-amber-100 cursor-pointer hover:shadow-md transition">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="font-bold text-amber-900">ğŸ“œ íš¨ë¹ˆ ì—­ì‚¬ (40ë¬¸í•­)</h2>
                        <p class="text-[11px] text-amber-700 mt-1">1969ë…„ ì² ê±° ì‚¬ê±´, ë°•ì‹ ìœ  íšŒì¥, ì‹œì¥ ì”í˜¹ì‚¬ ë“±</p>
                    </div>
                    <i class="fa-solid fa-clock-rotate-left text-amber-200 text-2xl"></i>
                </div>
            </div>
            <div onclick="initQuiz('transport')" class="bg-blue-50 p-4 rounded-xl border border-blue-100 cursor-pointer hover:shadow-md transition">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="font-bold text-blue-900">ğŸšŒ íš¨ë¹ˆ êµí†µ (40ë¬¸í•­)</h2>
                        <p class="text-[11px] text-blue-700 mt-1">ì‹œì¦ˆì¿  ì‹œìŠ¤í…œ, ë²„ìŠ¤ ë„ìƒ‰, ì§€í•˜ì²  ë…¸ì„  ìƒ‰ìƒ ë“±</p>
                    </div>
                    <i class="fa-solid fa-bus text-blue-200 text-2xl"></i>
                </div>
            </div>
            <div onclick="initQuiz('geo')" class="bg-emerald-50 p-4 rounded-xl border border-emerald-100 cursor-pointer hover:shadow-md transition">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="font-bold text-emerald-900">ğŸ—ºï¸ íš¨ë¹ˆ ì§€ë¦¬ (40ë¬¸í•­)</h2>
                        <p class="text-[11px] text-emerald-700 mt-1">9ëŒ€ ê¶Œì—­ ì²´ê³„, í–‰ì •êµ¬ì—­, ì§€í˜•ì  íŠ¹ì„±</p>
                    </div>
                    <i class="fa-solid fa-map text-emerald-200 text-2xl"></i>
                </div>
            </div>
            <div onclick="initQuiz('people')" class="bg-purple-50 p-4 rounded-xl border border-purple-100 cursor-pointer hover:shadow-md transition">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="font-bold text-purple-900">ğŸ‘¤ ì¸ë¬¼/ìºë¦­í„° (40ë¬¸í•­)</h2>
                        <p class="text-[11px] text-purple-700 mt-1">ì‹œì¥ë‹˜ë“¤ì˜ ë•ë ¥, ìš´ìˆ˜ì—…ì²´ ì˜¤ì‹œìº ì„¤ì • ë“±</p>
                    </div>
                    <i class="fa-solid fa-id-card text-purple-200 text-2xl"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- [í™”ë©´ 2] í€´ì¦ˆ ì§„í–‰ -->
    <div id="quiz-screen" class="hidden flex-1 flex flex-col bg-white h-full absolute inset-0 z-50">
        <header class="flex items-center justify-between p-4 border-b border-gray-100">
            <button onclick="confirmQuit()" class="text-gray-400 p-2"><i class="fa-solid fa-xmark text-xl"></i></button>
            <div class="flex-1 mx-4">
                <div class="h-1.5 bg-gray-100 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-indigo-600 progress-bar" style="width: 0%"></div>
                </div>
            </div>
            <div class="text-xs font-bold text-gray-400"><span id="current-count">1</span> / 10</div>
        </header>

        <div class="flex-1 p-6 flex flex-col overflow-y-auto">
            <div class="mb-6">
                <span id="field-badge" class="bg-indigo-100 text-indigo-600 text-[10px] font-black px-2 py-0.5 rounded tracking-wider mb-2 inline-block uppercase">CATEGORY</span>
                <h2 id="question-text" class="text-lg font-bold text-gray-900 leading-snug">ë¬¸ì œ ë¡œë”© ì¤‘...</h2>
            </div>
            <div id="options-area" class="space-y-2"></div>
        </div>

        <!-- pb-safeë¥¼ pb-8ë¡œ ë³€ê²½í•˜ì—¬ ëª¨ë°”ì¼ í˜¸í™˜ì„± ê°œì„  -->
        <div id="feedback-area" class="hidden p-4 bg-white border-t border-gray-100 shadow-lg pb-8">
            <div id="explanation" class="text-[11px] text-gray-500 mb-4 bg-gray-50 p-3 rounded-lg border border-gray-200 max-h-24 overflow-y-auto"></div>
            <button id="next-btn" onclick="nextQuestion()" class="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition">ë‹¤ìŒ ë¬¸ì œ</button>
        </div>
    </div>

    <!-- [í™”ë©´ 3] ê²°ê³¼ -->
    <div id="result-screen" class="hidden absolute inset-0 bg-white z-[60] flex flex-col items-center justify-center p-8 text-center">
        <div id="result-icon" class="text-6xl mb-6">ğŸ…</div>
        <h2 class="text-2xl font-black text-gray-900 mb-2" id="result-title">í‰ê°€ ì™„ë£Œ</h2>
        <p id="result-msg" class="text-gray-500 mb-8">ë‹¹ì‹ ì˜ ì ìˆ˜ëŠ”?</p>
        <div class="bg-indigo-50 w-full p-8 rounded-3xl mb-8">
            <div class="text-5xl font-black text-indigo-600"><span id="final-score">0</span>ì </div>
        </div>
        <button onclick="location.reload()" class="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold shadow-lg">ì¹´í…Œê³ ë¦¬ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>

</div>

<script>
    // ---------------------------------------------------------
    // [íš¨ë¹ˆê´‘ì—­ì‹œ ë§ˆìŠ¤í„° ë°ì´í„°ë² ì´ìŠ¤]
    // ë°ì´í„°ëŠ” ìƒë‹¨ì˜ script íƒœê·¸ë“¤ì„ í†µí•´ window.quizDBì— ë¡œë“œë©ë‹ˆë‹¤.
    // ---------------------------------------------------------
    
    // quizDBê°€ ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸ (ì•ˆì „ì¥ì¹˜)
    const quizDB = window.quizDB || {};

    // --- í€´ì¦ˆ ì‹œìŠ¤í…œ ë¡œì§ ---
    let currentField = '';
    let questions = [];
    let currentIdx = 0;
    let score = 0;

    function initQuiz(field) {
        currentField = field;
        
        // ë°ì´í„° ë¡œë“œ í™•ì¸
        if (!quizDB[field]) {
            alert("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return;
        }

        const db = quizDB[field];
        
        // ëœë¤ ì…”í”Œ
        const shuffled = [...db].sort(() => Math.random() - 0.5);
        questions = shuffled.slice(0, 10); // ë¬´ì¡°ê±´ 10ë¬¸ì œ ì¶”ì¶œ
        
        currentIdx = 0;
        score = 0;

        document.getElementById('selection-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        
        const badge = document.getElementById('field-badge');
        const titles = { history: "íš¨ë¹ˆ ì—­ì‚¬ ì „ë¬¸ê°€", transport: "íš¨ë¹ˆ êµí†µ ì „ë¬¸ê°€", geo: "íš¨ë¹ˆ ì§€ë¦¬ ì „ë¬¸ê°€", people: "íš¨ë¹ˆ ì¸ë¬¼ ì „ë¬¸ê°€" };
        badge.innerText = titles[field];

        loadQuestion();
    }

    function loadQuestion() {
        const q = questions[currentIdx];
        document.getElementById('current-count').innerText = currentIdx + 1;
        document.getElementById('progress-bar').style.width = `${((currentIdx + 1) / 10) * 100}%`;
        document.getElementById('question-text').innerText = q.q;

        const optsArea = document.getElementById('options-area');
        optsArea.innerHTML = '';

        // ë³´ê¸° ì„ê¸°
        let indices = [0, 1, 2, 3];
        indices.sort(() => Math.random() - 0.5);

        indices.forEach(i => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = q.options[i];
            btn.onclick = () => checkAnswer(i, btn, q.answer);
            optsArea.appendChild(btn);
        });

        document.getElementById('feedback-area').classList.add('hidden');
    }

    function checkAnswer(selected, btn, correct) {
        if (document.querySelector('.option-btn.correct')) return;

        const q = questions[currentIdx];
        const buttons = document.querySelectorAll('.option-btn');

        if (selected === correct) {
            btn.classList.add('correct', 'pop-anim');
            btn.innerHTML += ' <i class="fa-solid fa-circle-check float-right mt-1"></i>';
            score += 10;
        } else {
            btn.classList.add('wrong');
            btn.innerHTML += ' <i class="fa-solid fa-circle-xmark float-right mt-1"></i>';
            buttons.forEach(b => {
                if (b.innerText === q.options[correct]) b.classList.add('correct');
            });
        }

        const explanation = document.getElementById('explanation');
        explanation.innerHTML = `<strong>ğŸ’¡ í•´ì„¤:</strong> ${q.desc}`;
        document.getElementById('feedback-area').classList.remove('hidden');
        
        if (currentIdx === 9) document.getElementById('next-btn').innerText = "ê²°ê³¼ í™•ì¸í•˜ê¸°";
        else document.getElementById('next-btn').innerText = "ë‹¤ìŒ ë¬¸ì œ";
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < 10) loadQuestion();
        else showResult();
    }

    function showResult() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('final-score').innerText = score;
        
        const msg = document.getElementById('result-msg');
        if (score === 100) msg.innerText = "ì™„ë²½í•©ë‹ˆë‹¤! íš¨ë¹ˆì‹œ 1ê¸‰ ì •êµì‚¬ ìˆ˜ì¤€!";
        else if (score >= 80) msg.innerText = "í›Œë¥­í•©ë‹ˆë‹¤! íš¨ë¹ˆì‹œë¥¼ ì‚¬ë‘í•˜ì‹œëŠ”êµ°ìš”.";
        else if (score >= 60) msg.innerText = "ì¤€ìˆ˜í•œ ì„±ì ì…ë‹ˆë‹¤. ì¡°ê¸ˆ ë” ë¶„ë°œí•˜ì„¸ìš”!";
        else msg.innerText = "íš¨ë¹ˆìœ„í‚¤ë¥¼ ë” ì •ë…í•˜ì…”ì•¼ê² ì–´ìš”.";
    }

    function confirmQuit() {
        if (confirm("í€´ì¦ˆë¥¼ ì¤‘ë‹¨í•˜ê³  ë¶„ì•¼ ì„ íƒìœ¼ë¡œ ëŒì•„ê°ˆê¹Œìš”?")) {
            location.reload();
        }
    }
</script>

</body>
</html>